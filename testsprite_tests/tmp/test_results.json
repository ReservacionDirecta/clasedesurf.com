[
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "42543f5b-e5f1-4b7a-b643-be8d2bc2fcae",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC001-User Registration with JWT Token Issuance",
    "description": "Verify that new users can register successfully and receive a valid JWT token and refresh token.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Scroll down to reveal participant detail input fields and try to locate them again.\n        await page.mouse.wheel(0, 300)\n        \n\n        # -> Look for a button or link to proceed to next step in booking or open a detailed booking form to enter participant details.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed to next booking step or form\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill participant details in the detailed booking form and click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Input full name in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('John Doe')\n        \n\n        frame = context.pages[-1]\n        # Input email in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('john.doe@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill the detailed booking form fields and click 'Siguiente' to proceed to the next step.\n        frame = context.pages[-1]\n        # Input height in cm\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Input weight in kg\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Click checkbox 'Sé nadar' to indicate swimming ability\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[3]/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Input medical conditions or injuries\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('No medical conditions')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill emergency contact details and confirm the reservation.\n        frame = context.pages[-1]\n        # Input emergency contact name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Jane Doe')\n        \n\n        frame = context.pages[-1]\n        # Input emergency contact phone number\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('+51987654321')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Reserva' button to complete the booking as guest\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Continuar como Invitado' button to finalize reservation as guest and trigger user registration and token issuance.\n        frame = context.pages[-1]\n        # Click 'Continuar como Invitado' button to finalize reservation as guest\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div[2]/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Confirmar Datos y Reservar' button to finalize the reservation and trigger user creation and token issuance.\n        frame = context.pages[-1]\n        # Click 'Confirmar Datos y Reservar' button to finalize reservation\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[3]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try clearing and re-entering the 'Edad' field to trigger validation. If that fails, report the website issue and stop.\n        frame = context.pages[-1]\n        # Clear the 'Edad' field to reset validation\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[2]/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('')\n        \n\n        frame = context.pages[-1]\n        # Re-enter '30' in the 'Edad' field to trigger validation\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[2]/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Datos y Reservar' button again to attempt submission after re-entry\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[3]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=User registration successful and tokens issued').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: New user registration and issuance of valid JWT and refresh tokens did not complete successfully as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The guest checkout flow was followed through all steps including participant details and emergency contact. However, the final reservation confirmation step fails due to a persistent validation error on the 'Edad' field, which remains highlighted in red despite valid input. This prevents completing the reservation, user creation, and issuance of JWT and refresh tokens. The issue should be fixed by developers to allow successful guest checkout and user registration.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[WARNING] Detected `scroll-behavior: smooth` on the `<html>` element. In a future version, Next.js will no longer automatically disable smooth scrolling during route transitions. To prepare for this change, add `data-scroll-behavior=\"smooth\"` to your <html> element. Learn more: https://nextjs.org/docs/messages/missing-data-scroll-behavior (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[WARNING] Image with src \"http://localhost:3000/uploads/classes/mancora-1.jpg\" has \"fill\" and parent element with invalid \"position\". Provided \"static\" should be one of absolute,fixed,relative. (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reservations:0:0)\n[ERROR] Error: No autorizado\n    at handleCreateReservation (webpack-internal:///(app-pages-browser)/./src/app/reservations/confirmation/page.tsx:284:23) (at :66:34)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reservations:0:0)\n[ERROR] Error: No autorizado\n    at handleCreateReservation (webpack-internal:///(app-pages-browser)/./src/app/reservations/confirmation/page.tsx:284:23) (at :66:34)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559396124229//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:57.982Z",
    "modified": "2026-01-28T00:16:36.325Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "0acb7a15-e110-4999-ba4b-a017b9ad3ed9",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC002-User Login with JWT Token Refresh Flow",
    "description": "Verify user login with correct credentials and the refresh token flow for renewing JWT tokens.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click the 'Reservar ahora' button to open the booking modal for booking.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the correct 'Reservar ahora' button (index 39) to open the booking modal.\n        frame = context.pages[-1]\n        # Click the 'Reservar ahora' button to open the booking modal for booking.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/div[2]/div/select').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill participant details for guest checkout by selecting 1 participant and proceed with reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with the booking as guest.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Siguiente' button to proceed to the next step in the guest checkout reservation process.\n        frame = context.pages[-1]\n        # Click the 'Siguiente' button to proceed with the guest checkout reservation.\n        elem = frame.locator('xpath=html/body/div[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Login Successful! Welcome back').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test case failed: The login with correct credentials and refresh token flow did not succeed as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Guest checkout flow test stopped due to issue: The participant details form does not progress after clicking 'Siguiente' despite no validation errors. Further testing cannot continue until this is fixed.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559038559085//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:57.988Z",
    "modified": "2026-01-28T00:10:38.736Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "e1aa7c7f-e8ae-4fcf-8fff-912eafd9b0eb",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC003-Guest Checkout Account Creation and Notification",
    "description": "Verify guest checkout flow creates new user with generated credentials, sends welcome email, and returns auth token.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Reservar ahora' button to start booking process.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click on 'Reservar ahora' button to start booking process.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try clicking the 'Aceptar todas' button on the cookie consent banner to remove any potential UI blocking, then retry clicking 'Reservar ahora'.\n        frame = context.pages[-1]\n        # Click 'Aceptar todas' button on cookie consent banner to accept cookies and remove UI blocking.\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div[2]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Close the cookie preferences modal by clicking the close button to clear UI and then retry clicking 'Reservar ahora' to start booking.\n        frame = context.pages[-1]\n        # Click close button on cookie preferences modal to close it.\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div[2]/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Reservar ahora' button to open the booking modal and start the guest booking process.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to start booking process as guest.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in participant details with an unused email and proceed by clicking 'Siguiente'.\n        frame = context.pages[-1]\n        # Input full name in 'Nombre completo' field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input unused email in 'Correo electrónico' field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser12345@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in 'Edad' field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in customization details and click 'Siguiente' to proceed to the next step.\n        frame = context.pages[-1]\n        # Input height in cm.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Input weight in kg.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Check 'Sé nadar' checkbox.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[3]/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Input medical condition as none.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna lesión o condición médica.')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill emergency contact details and confirm the reservation by clicking 'Confirmar Reserva'.\n        frame = context.pages[-1]\n        # Input emergency contact name.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Perez')\n        \n\n        frame = context.pages[-1]\n        # Input emergency contact phone number.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('+51987654321')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Reserva' button to complete booking as guest.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Continuar como Invitado' button to finalize booking and trigger user account creation.\n        frame = context.pages[-1]\n        # Click 'Continuar como Invitado' button to finalize booking as guest and create user account.\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div[2]/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=User account successfully created with auth token').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Guest checkout flow did not create a new user with generated credentials, did not send welcome email, or did not return an authentication token as expected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Guest checkout flow test stopped due to critical validation error on 'Edad' field preventing booking finalization and user account creation. Issue reported.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[WARNING] The resource http://localhost:3000/_next/static/css/app/layout.css?v=1769558713755 was preloaded using link preload but not used within a few seconds from the window's load event. Please make sure it has an appropriate `as` value and it is preloaded intentionally. (at http://localhost:3000/classes/3:0:0)\n[WARNING] Detected `scroll-behavior: smooth` on the `<html>` element. In a future version, Next.js will no longer automatically disable smooth scrolling during route transitions. To prepare for this change, add `data-scroll-behavior=\"smooth\"` to your <html> element. Learn more: https://nextjs.org/docs/messages/missing-data-scroll-behavior (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[WARNING] Image with src \"http://localhost:3000/uploads/classes/mancora-1.jpg\" has \"fill\" and parent element with invalid \"position\". Provided \"static\" should be one of absolute,fixed,relative. (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559250905064//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:57.995Z",
    "modified": "2026-01-28T00:14:11.074Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "5c9d66ce-e94b-4109-819c-18f8c558008f",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC004-Guest Checkout with Existing Email Error",
    "description": "Verify that guest checkout attempt with existing user email returns proper error response.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Scroll down to reveal more of the booking form to locate the email input field for guest checkout.\n        await page.mouse.wheel(0, 400)\n        \n\n        # -> Scroll down further to try to reveal the email input field and other participant details for guest checkout.\n        await page.mouse.wheel(0, 400)\n        \n\n        # -> Click the 'Reservar ahora' button (index 55) to proceed to the next step or open the booking form where email and participant details can be entered.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed to booking form or next step\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Input full name, existing user email, age, select participants, and submit the form.\n        frame = context.pages[-1]\n        # Input full name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input existing user email\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('admin@test.com')\n        \n\n        frame = context.pages[-1]\n        # Input age\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to submit booking form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        await expect(frame.locator('text=admin@test.com').first).to_be_visible(timeout=30000)\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559165799217//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.002Z",
    "modified": "2026-01-28T00:12:45.986Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "aa318de2-67e8-4a73-be7d-248c1a93f74c",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC005-Class Browsing and Detailed Session Selection",
    "description": "Validate that users can browse classes and select sessions with accurate details including dates and times.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Open the booking modal by clicking the 'Reservar ahora' button to view session details and start guest booking flow.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill participant details in the booking modal and proceed to complete reservation as guest.\n        frame = context.pages[-1]\n        # Open participant dropdown to select number of participants\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/div[2]/div/select').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with booking\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Siguiente' button to proceed to the next step in the guest booking flow.\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with guest booking flow\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill 'Nombre completo' with a valid full name and 'Correo electrónico' with a valid email address, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Fill 'Nombre completo' with a valid full name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Fill 'Correo electrónico' with a valid email address\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with guest booking flow\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        try:\n            await expect(page.locator('text=Booking Confirmed! Your session is reserved.').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test plan failed: Unable to verify that users can browse classes and select sessions with accurate details including dates and times. The booking confirmation message was not found, indicating the guest checkout flow did not complete successfully.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Reported the booking form issue blocking guest checkout flow on /classes/3. Stopping further testing as the form does not proceed after valid input.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/176955911422127//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.009Z",
    "modified": "2026-01-28T00:11:54.384Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "2ae0fb5b-eee6-448c-8d5d-7cc05c8a8e7d",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC006-Multi-step Booking Flow with Participant Management",
    "description": "Test the booking modal workflow including participant data entry, session selection, and booking confirmation.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click the 'Reservar ahora' button to start booking a class session.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Enter participant details for the single participant in the booking modal.\n        frame = context.pages[-1]\n        # Select number of participants dropdown to enter participant details.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in participant details: full name, email, and age, then proceed by clicking 'Siguiente'.\n        frame = context.pages[-1]\n        # Enter full name for participant.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Enter email for participant.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan@ejemplo.com')\n        \n\n        frame = context.pages[-1]\n        # Enter age for participant.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' to proceed to next step in booking modal.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the customization fields: height, weight, swimming ability, experience level, and medical conditions if any, then click 'Siguiente' to continue.\n        frame = context.pages[-1]\n        # Enter height in cm.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Enter weight in kg.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Click checkbox 'Sé nadar' to indicate swimming ability.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[3]/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Enter 'Ninguna' for medical conditions.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' to proceed to the next step in booking modal.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Identify and fill emergency contact details fields correctly or proceed if not required, then continue to booking confirmation step.\n        await page.mouse.wheel(0, await page.evaluate('() => window.innerHeight'))\n        \n\n        # -> Click the 'Siguiente' button to attempt to proceed to the next step or booking confirmation, or identify emergency contact fields if they appear.\n        frame = context.pages[-1]\n        # Click 'Siguiente' to try to proceed to the next step or booking confirmation.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Booking Completed Successfully!').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: The booking modal workflow did not complete successfully, indicating failure in participant data entry, session selection, or booking confirmation as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Tested the booking modal workflow for guest checkout on /classes/3. Participant details and customization steps were completed successfully. However, the modal does not proceed past the customization step after clicking 'Siguiente'. Emergency contact fields are not visible or accessible, blocking the booking confirmation step. The issue prevents completing the booking process as a guest. Reporting this issue and stopping further testing.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559180833067//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.016Z",
    "modified": "2026-01-28T00:13:01.031Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "2a732a44-0e2a-4c02-8766-d51ccbf766d5",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC007-Booking State Preservation Across Navigation",
    "description": "Verify that booking data is preserved when the user navigates away and returns or logs in during the booking process.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal and begin entering participant details.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button/div[2]/div/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill participant details partially without logging in.\n        frame = context.pages[-1]\n        # Click 'Iniciar Sesión' to simulate login later if needed\n        elem = frame.locator('xpath=html/body/header/div/div/div/a/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Perform login with provided credentials to test if booking data is preserved after login.\n        frame = context.pages[-1]\n        # Input username for login\n        elem = frame.locator('xpath=html/body/div[2]/div/div[2]/div/form/div/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('admin@test.com')\n        \n\n        frame = context.pages[-1]\n        # Input password for login\n        elem = frame.locator('xpath=html/body/div[2]/div/div[2]/div/form/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('admin123')\n        \n\n        frame = context.pages[-1]\n        # Click 'Iniciar Sesión' button to login\n        elem = frame.locator('xpath=html/body/div[2]/div/div[2]/div/form/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Navigate back to booking page to continue booking as guest and verify data preservation without login.\n        frame = context.pages[-1]\n        # Click 'Volver al inicio' to return to main booking page\n        elem = frame.locator('xpath=html/body/div[2]/div/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Navigate to /classes/3 again and open booking modal to check if previously entered booking data is preserved.\n        frame = context.pages[-1]\n        # Click 'Clases' menu to navigate to classes list\n        elem = frame.locator('xpath=html/body/header/div/div/nav/a[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Click 'Reservar Ahora' button for the specific class to open booking modal\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div/div/div[2]/h3').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Close or accept the cookie consent panel to unblock the page and then click 'Reservar Ahora' button again to open booking modal.\n        frame = context.pages[-1]\n        # Click 'Cerrar banner de cookies' button to close cookie consent panel\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Reservar Ahora' button for the first class to open booking modal and check if previously entered booking data is preserved.\n        frame = context.pages[-1]\n        # Click 'Reservar Ahora' button for first class to open booking modal\n        elem = frame.locator('xpath=html/body/div[2]/main/section/div/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Reservar ahora' button to proceed with guest booking and complete the reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with booking as guest\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the personal information fields (name, email, age, participants) and click 'Siguiente' to proceed to the next step.\n        frame = context.pages[-1]\n        # Fill in full name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Fill in email address\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan@ejemplo.com')\n        \n\n        frame = context.pages[-1]\n        # Fill in age\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in personalization details and click 'Siguiente' to proceed to the next step.\n        frame = context.pages[-1]\n        # Fill in height in cm\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Fill in weight in kg\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Check 'Sé nadar' checkbox\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[3]/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Fill in medical condition text area\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna lesión o condición médica')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in emergency contact name and phone, then click 'Confirmar Reserva' to complete the booking as guest.\n        frame = context.pages[-1]\n        # Fill emergency contact name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Maria Lopez')\n        \n\n        frame = context.pages[-1]\n        # Fill emergency contact phone\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('+51987654321')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Reserva' button to complete booking\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Continuar como Invitado' button to finalize the booking as a guest and verify reservation creation.\n        frame = context.pages[-1]\n        # Click 'Continuar como Invitado' button to finalize booking as guest\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div[2]/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Confirmar Datos y Reservar' button to finalize the booking and verify reservation creation.\n        frame = context.pages[-1]\n        # Click 'Confirmar Datos y Reservar' button to finalize booking\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[3]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try to correct the 'Edad' field input by clearing and re-entering a valid age, then attempt to submit the form again.\n        frame = context.pages[-1]\n        # Clear the 'Edad' field to reset validation\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[2]/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('')\n        \n\n        frame = context.pages[-1]\n        # Re-enter valid age '25' in the 'Edad' field\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[2]/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Datos y Reservar' button again to attempt submission\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[3]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Booking data preserved after navigation and login').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Booking data was not preserved after navigating away and returning or logging in during the booking process as required by the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The test to verify booking data preservation was partially successful. Booking data was preserved when navigating away and returning, and during the guest booking flow. However, the login attempt failed due to invalid credentials, so preservation after login could not be verified. The final booking submission was blocked by a persistent validation error on the 'Edad' field, preventing completion of the reservation. Further investigation or fixing of the validation issue is needed to fully complete the booking process.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[WARNING] Detected `scroll-behavior: smooth` on the `<html>` element. In a future version, Next.js will no longer automatically disable smooth scrolling during route transitions. To prepare for this change, add `data-scroll-behavior=\"smooth\"` to your <html> element. Learn more: https://nextjs.org/docs/messages/missing-data-scroll-behavior (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/auth/callback/credentials:0:0)\n[WARNING] %c%s%c  \u001b[33m\u001b[1m⚠\u001b[22m\u001b[39m metadataBase property in metadata export is not set for resolving social open graph or twitter images, using \"http://localhost:3000\". See https://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase background: #e6e6e6;background: light-dark(rgba(0,0,0,0.1), rgba(255,255,255,0.25));color: #000000;color: light-dark(#000000, #ffffff);border-radius: 2px  Server   (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/compiled/react-server-dom-webpack/cjs/react-server-dom-webpack-client.browser.development.js:3465:21)\n[ERROR] Failed to load resource: the server responded with a status of 404 (Not Found) (at http://localhost:3000/api/schools/reviews/featured:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 (Not Found) (at http://localhost:3000/api/schools/reviews/featured:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 429 (Too Many Requests) (at https://api.open-meteo.com/v1/forecast?latitude=-12.149&longitude=-77.023&current=temperature_2m,wind_speed_10m,wind_direction_10m&timezone=auto:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 () (at https://images.unsplash.com/photo-1518774786638-7f551c96a77d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 () (at https://images.unsplash.com/photo-1544473344-f8644e5902bc?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 () (at https://images.unsplash.com/photo-1505566089201-72f3e8f5223c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 () (at https://images.unsplash.com/photo-1481190566236-40742a785e05?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 () (at https://images.unsplash.com/photo-1522055620701-081699709db5?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 () (at https://images.unsplash.com/photo-1416331108676-a22edb5be43c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 (Not Found) (at http://localhost:3000/uploads/classes/surf-class-3.jpg:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 (Not Found) (at http://localhost:3000/uploads/classes/surf-class-3.jpg:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 (Not Found) (at http://localhost:3000/uploads/classes/surf-class-3.jpg:0:0)\n[ERROR] Failed to load resource: the server responded with a status of 404 (Not Found) (at http://localhost:3000/uploads/classes/surf-class-3.jpg:0:0)\n[WARNING] Image with src \"http://localhost:3000/api/images/uploads/classes/1767731487292-u6of2dhc5vi.webp\" has \"fill\" and parent element with invalid \"position\". Provided \"static\" should be one of absolute,fixed,relative. (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)\n[ERROR] Failed to load resource: the server responded with a status of 401 (Unauthorized) (at http://localhost:3000/api/reservations:0:0)\n[ERROR] Error: No autorizado\n    at handleCreateReservation (webpack-internal:///(app-pages-browser)/./src/app/reservations/confirmation/page.tsx:284:23) (at :66:34)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559561950646//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.022Z",
    "modified": "2026-01-28T00:19:22.365Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "7efe61ff-6150-46c2-9dcb-398b4cc3bd46",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC008-Reservation Management - Create, Update and Cancel",
    "description": "Validate the full lifecycle of a reservation including creation, updates to participant info/session and cancellation with status tracking.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Open the booking modal by clicking the 'Reservar ahora' button.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click the 'Reservar ahora' button to open the booking modal for reservation creation.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select '1 persona' option from the participant dropdown (index 43) and then click 'Reservar ahora' button (index 44) to proceed with reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with reservation as guest\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the participant's full name, email, and age fields, then click the 'Siguiente' button to proceed.\n        frame = context.pages[-1]\n        # Input full name in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Input email in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step in reservation process\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in height, weight, swimming ability, experience level, and medical condition fields, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Input height in cm\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Input weight in kg\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Click checkbox 'Sé nadar' to indicate swimming ability\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[3]/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Input medical condition details\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna lesión o condición médica')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Reservation Completed Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: The reservation lifecycle validation did not complete successfully as per the test plan. Reservation creation, updates, or cancellation steps did not pass as expected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Reservation creation failed due to form progression issue at 'Personaliza tu experiencia' step. Unable to complete guest checkout flow. Reporting issue and stopping further actions.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559175572374//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.029Z",
    "modified": "2026-01-28T00:12:55.784Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "65f35ebc-7799-41ce-b83a-b6451dc38681",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC009-Payment Voucher Upload and Admin Verification",
    "description": "Test payment voucher upload functionality and subsequent verification by admin with accurate status update in dashboard.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Reservar ahora' button to open booking modal\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click on 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Reservar ahora' button to proceed with reservation\n        frame = context.pages[-1]\n        # Click on 'Reservar ahora' button to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on 'Reservar ahora' button to proceed to participant details form\n        frame = context.pages[-1]\n        # Click on 'Reservar ahora' button to proceed to participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div/section[4]/div/div[2]/div/div[2]/a').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Switch back to the original booking tab at http://localhost:3000/classes/3 and retry clicking the correct 'Reservar ahora' button to proceed with participant details form.\n        frame = context.pages[-1]\n        # Switch to the original booking tab by clicking on it or go back to it\n        elem = frame.locator('xpath=html/body/div/div[2]/div[9]/div/div[3]/div/div/canvas').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        await page.goto('http://localhost:3000/classes/3', timeout=10000)\n        await asyncio.sleep(3)\n        \n\n        # -> Dismiss cookie consent banner by clicking 'Aceptar todas' button to avoid UI obstruction, then click 'Reservar ahora' button to open booking modal.\n        frame = context.pages[-1]\n        # Click 'Aceptar todas' button to accept cookies and dismiss banner\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div[2]/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click on the correct 'Reservar ahora' button (index 45) to open the booking modal and proceed with participant details entry.\n        frame = context.pages[-1]\n        # Click on 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in participant details: name, email, age, and confirm number of participants, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Input full name in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input email in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Siguiente' button (index 53) to proceed to the next step in the booking process.\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next booking step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in valid emergency contact name and phone number, then click 'Confirmar Reserva' button to complete reservation.\n        frame = context.pages[-1]\n        # Input emergency contact name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Emergency Contact')\n        \n\n        frame = context.pages[-1]\n        # Input valid emergency phone number\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('+51987654321')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Reserva' button to complete reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Continuar como Invitado' button to finalize reservation as guest and proceed to payment voucher upload.\n        frame = context.pages[-1]\n        # Click 'Continuar como Invitado' button to finalize reservation as guest\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div[2]/div/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Correct the 'Edad' (Age) field by inputting a valid age number, optionally fill height and weight, then click 'Confirmar Datos y Reservar' button to complete reservation.\n        frame = context.pages[-1]\n        # Correct the 'Edad' field by inputting a valid age\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[2]/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Datos y Reservar' button to complete reservation\n        elem = frame.locator('xpath=html/body/div[2]/div/div[3]/div/div/div/div[3]/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Payment Voucher Verified Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Payment voucher upload and verification process did not complete successfully as per the test plan. The payment status did not update to 'verified' and the UI did not reflect the correct status.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "The reservation process could not be fully completed due to a persistent validation error on the 'Edad' (Age) field in the participant details form, which prevented final confirmation of the reservation. Consequently, the payment voucher upload and subsequent admin verification steps could not be tested. The guest checkout flow was partially tested up to participant details entry. Please review and fix the form validation issue to enable full testing of the payment voucher upload and verification functionality.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559319679718//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.036Z",
    "modified": "2026-01-28T00:15:19.882Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "75c10d6b-3eb0-409d-b6d1-0430fa211a35",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC010-Application of Discount Codes During Payment",
    "description": "Verify discount codes can be applied during payment, affecting the final amount and respecting expiration/usage rules.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill participant details as guest and proceed to payment step.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with booking\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Siguiente' to proceed to the next step in the booking process, likely payment.\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step in booking\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill valid full name and valid email in participant details form, then click 'Siguiente' to proceed to payment step.\n        frame = context.pages[-1]\n        # Fill valid full name in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Fill valid email in participant details form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to payment step\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        try:\n            await expect(page.locator('text=Discount Applied Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Discount codes could not be applied during payment as expected. The discount was not reflected in the total amount or invalid/expired codes were not properly rejected.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Stopped testing due to persistent form validation error on age field preventing progression to payment step. Cannot test discount code application as required.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559047760231//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.042Z",
    "modified": "2026-01-28T00:10:48.041Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "7857cdc3-e376-4d1c-a547-46acdeba12a0",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC011-Role-based Access Control in Dashboards",
    "description": "Verify that students, instructors, school admins, and super admins only access data and controls appropriate to their roles and tenancy.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal for booking.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select '1 persona' from the participant dropdown and then click 'Reservar ahora' to proceed with booking as guest.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' to proceed with booking as guest\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in guest personal details: full name, email, and age, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Input full name in booking form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Input email in booking form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in booking form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with booking\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the final 'Reservar ahora' button to complete the reservation as a guest and verify success.\n        frame = context.pages[-1]\n        # Click final 'Reservar ahora' button to complete guest reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        try:\n            await expect(page.locator('text=Access Granted to All Roles')).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test plan execution failed: Role-based access control verification failed. Users were not able to access data and controls appropriate to their roles and tenancy as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Guest booking submission failed on /classes/3. Clicking final 'Reservar ahora' button does not complete reservation or show confirmation. Further testing stopped due to this blocking issue.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559114450103//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.049Z",
    "modified": "2026-01-28T00:11:54.688Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "e453a139-2799-436b-a7f3-7753467f7a0a",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC012-Multi-tenant Data Isolation Verification",
    "description": "Ensure users and admins from one surf school cannot access data belonging to other schools.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Open the booking modal by clicking the 'Reservar ahora' button.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click 'Reservar ahora' button to complete the guest reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to complete the guest reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in guest personal information fields (name, email, age) and proceed to complete the reservation.\n        frame = context.pages[-1]\n        # Input guest full name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Input guest email\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan@ejemplo.com')\n        \n\n        frame = context.pages[-1]\n        # Input guest age\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Verify reservation completion and confirmation message.\n        frame = context.pages[-1]\n        # Click 'Siguiente' or equivalent button to finalize reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Access to School B data granted').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test failed: Multi-tenant data isolation enforcement failed. Users/admins from School A should NOT access School B data.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Guest booking flow could not be completed due to reservation submission failure. Reporting the issue and stopping further actions. Multi-tenant data isolation tests for school admins not performed due to this blocking issue.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559080413442//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.055Z",
    "modified": "2026-01-28T00:11:20.621Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "68f0ea38-44d3-46e0-ab41-80b4bef63a71",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC013-Email Notifications Triggered on Key User Actions",
    "description": "Test that email notifications are sent correctly for welcome emails, reservation confirmations, cancellations, payment receipts, and reminders.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Open the booking modal to start guest checkout.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select 1 participant from the dropdown and click 'Reservar ahora' to proceed with reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the reservation form fields: full name, email, age, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Input full name in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Input email in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in height, weight, swimming ability, experience level, and medical condition fields, then submit the reservation.\n        frame = context.pages[-1]\n        # Input height in cm\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Input weight in kg\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Sé nadar' checkbox to indicate swimming ability\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[14]/div/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Input medical condition as none\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna lesión')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to submit reservation details\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Check for any modal, alert, or page element indicating reservation success or confirmation. If none, try to navigate to user reservations or admin panel to verify reservation creation.\n        await page.mouse.wheel(0, 300)\n        \n\n        # -> Close cookie banner and navigate to admin panel to verify reservation creation and email notifications.\n        frame = context.pages[-1]\n        # Click 'Aceptar todas' to accept cookies and close banner\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div[2]/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Click 'Iniciar Sesión' to login as admin for verification\n        elem = frame.locator('xpath=html/body/header/div/div/div/a/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Email Notification Success').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Email notifications for welcome emails, reservation confirmations, cancellations, payment receipts, and reminders were not sent correctly as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Testing stopped due to navigation issue preventing access to admin panel or login page. Reservation confirmation and email notification verification could not be completed.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559272743819//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.062Z",
    "modified": "2026-01-28T00:14:32.969Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "90eb2192-8fa9-4dfe-945e-080d516a16e0",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC014-In-App Real-Time Notifications Functionality",
    "description": "Verify notifications appear in real-time in the notification center UI, can be marked read and status updates persist.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button/div[2]/div/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill participant details in the booking modal for guest checkout.\n        frame = context.pages[-1]\n        # Select number of participants dropdown\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/div[2]/div/select').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select '1 persona' from participants dropdown and click 'Reservar ahora' to complete guest reservation.\n        frame = context.pages[-1]\n        # Select '1 persona' from participants dropdown\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/div[2]/div/select').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to complete reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the guest reservation form fields: full name, email, and age, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Fill full name in guest reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Test User')\n        \n\n        frame = context.pages[-1]\n        # Fill email in guest reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('testuser@example.com')\n        \n\n        frame = context.pages[-1]\n        # Fill age in guest reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Siguiente' button to proceed to the next step in the reservation process.\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        try:\n            await expect(page.locator('text=Notification Center Updated Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: Notification did not appear in real-time, could not mark as read, or status updates did not persist as required by the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Reservation form stuck on 'Personaliza tu experiencia' step, unable to proceed further. Reported issue and stopping test as reservation cannot be completed to trigger notifications.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/176955908593298//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.068Z",
    "modified": "2026-01-28T00:11:26.146Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "8893749a-a2f3-4aae-83f6-943b3949535d",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC015-Admin Management of Classes, Instructors, and Users",
    "description": "Verify that authorized admins can create, update, and soft delete classes, instructors, and users with proper role and data validation.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Open the booking modal by clicking the 'Reservar ahora' button.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click the 'Reservar ahora' button to open the booking modal.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select '1 persona' option from the participant dropdown (index 56) and then click 'Reservar ahora' button (index 57) to proceed with guest reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with reservation as guest.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the personal information fields: full name, email, and age with valid data, then click the 'Siguiente' button to proceed.\n        frame = context.pages[-1]\n        # Input full name in the reservation form.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Input email in the reservation form.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Input age in the reservation form.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        frame = context.pages[-1]\n        # Click the 'Siguiente' button to proceed to the next step in the reservation process.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the 'Detalles' section fields (height, weight, swimming level, injuries) and proceed to the next step.\n        frame = context.pages[-1]\n        # Input height in cm in 'Detalles' section.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Input weight in kg in 'Detalles' section.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Input injuries or medical conditions as none.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna lesión o condición médica.')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to the next step in the reservation process.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Siguiente' button to attempt to proceed to the 'Emergencia' section or complete the reservation if emergency details are optional.\n        frame = context.pages[-1]\n        # Click the 'Siguiente' button to proceed to the next step or complete the reservation.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Admin Privileges Granted').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test plan execution failed: Authorized admins could not create, update, or soft delete classes, instructors, and users with proper role and data validation.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Guest checkout flow testing stopped due to booking form not progressing past 'Detalles' section. Emergency contact fields and final reservation step are inaccessible, blocking completion. Issue reported for developer investigation.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559196912177//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.075Z",
    "modified": "2026-01-28T00:13:17.077Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "e067eae4-48fe-488c-9d50-c3ea7cbcfafc",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC016-Product and Beach/Location Management",
    "description": "Test that products (equipment) and beach location data can be created, updated, and displayed correctly.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button/div[2]/div/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select 1 participant from the dropdown (index 42) and then click 'Reservar ahora' button (index 43) to proceed with booking.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to proceed with booking\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/div[2]/div/select').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Product and beach location successfully created').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError('Test plan failed: Products (equipment) and beach location data creation, update, or display did not succeed as expected.')\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Booking submission failed to proceed after selecting participants and clicking 'Reservar ahora'. No confirmation or page navigation occurred. Reporting this issue and stopping further testing as the guest checkout flow cannot be completed.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769558971652212//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.082Z",
    "modified": "2026-01-28T00:09:31.849Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "f918b1b3-c9b7-407e-bc70-4ec2a079eb05",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC017-Image Upload with Cloudinary and Fallback",
    "description": "Verify that images can be uploaded successfully to Cloudinary and fallback to local storage is handled correctly upon failure.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click the 'Reservar ahora' button to open the booking modal.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click the 'Reservar ahora' button to open the booking modal for booking.\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button/img').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Try to accept cookies banner to remove any overlay that might block interaction, then retry clicking 'Reservar ahora' button.\n        frame = context.pages[-1]\n        # Click 'Aceptar todas' button to accept cookies and remove cookie banner overlay.\n        elem = frame.locator('xpath=html/body/div[3]/div/div/div[2]/button[3]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Reservar ahora' button (index 40) again to open the booking modal.\n        frame = context.pages[-1]\n        # Click the 'Reservar ahora' button to open the booking modal for booking.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Reservar ahora' button at index 44 to open the booking modal.\n        frame = context.pages[-1]\n        # Click the 'Reservar ahora' button to open the booking modal.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/div[2]/div/select').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Reservar ahora' button (index 45) to proceed with booking.\n        frame = context.pages[-1]\n        # Click the 'Reservar ahora' button to proceed with booking.\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the personal information form with valid data: name, email, age, and select participants.\n        frame = context.pages[-1]\n        # Fill in the full name field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Fill in the email field with a valid email.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Fill in the age field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('30')\n        \n\n        # -> Correct the email input to a valid format and then click the 'Siguiente' button to proceed.\n        frame = context.pages[-1]\n        # Re-enter email with correct format to fix validation error.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan.perez@example.com')\n        \n\n        frame = context.pages[-1]\n        # Click the 'Siguiente' button to proceed to the next step in the booking modal.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Clear and re-enter a valid weight value in the weight field to resolve the validation error, then click 'Siguiente' to proceed.\n        frame = context.pages[-1]\n        # Clear the weight field to remove invalid input.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('')\n        \n\n        # -> Enter a valid weight value (e.g., 65) in the weight field and then click the 'Siguiente' button to proceed.\n        frame = context.pages[-1]\n        # Enter a valid weight value in the weight field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('65')\n        \n\n        # -> Try to uncheck and recheck the 'Sé nadar' checkbox (index 49) to see if it affects validation, then click 'Siguiente' button (index 53) to proceed.\n        frame = context.pages[-1]\n        # Toggle the 'Sé nadar' checkbox to potentially trigger validation update.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[3]/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Clear the weight field again and enter a valid weight value, then click 'Siguiente' button to proceed.\n        frame = context.pages[-1]\n        # Clear the weight field to remove invalid input.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('')\n        \n\n        # -> Try entering a different valid weight value (e.g., 60) in the weight field and then click the 'Siguiente' button to proceed.\n        frame = context.pages[-1]\n        # Enter a different valid weight value in the weight field.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('60')\n        \n\n        # -> Try clicking the 'Siguiente' button (index 53) to see if the form allows proceeding despite the weight field validation error.\n        frame = context.pages[-1]\n        # Click the 'Siguiente' button to attempt to proceed to the next step.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in emergency contact name and a valid emergency phone number, then click 'Confirmar Reserva' button to complete the reservation.\n        frame = context.pages[-1]\n        # Fill in emergency contact name.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Maria Lopez')\n        \n\n        frame = context.pages[-1]\n        # Fill in valid emergency phone number.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('+51987654321')\n        \n\n        frame = context.pages[-1]\n        # Click 'Confirmar Reserva' button to complete the reservation.\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button[2]').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        await expect(frame.locator('text=Completa tu Reserva').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Estás a solo unos pasos de vivir una experiencia increíble en el mar.').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Revisión').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Participantes').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Pago').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Surf Experience Máncora').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=miércoles, 28 de enero de 2026').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Por definir').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=NIVEL: BEGINNER').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Puedes continuar como invitado o iniciar sesión para guardar esta reserva en tu historial.').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Crearemos una cuenta automática para ti con los datos de la reserva.').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Continuar como Invitado').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Si ya tienes cuenta, inicia sesión para acumular puntos.').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Iniciar Sesión').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=S/ 90').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Subtotal por persona').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Cantidad alumnos').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=x 1').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=miércoles, 28 de enero de 2026').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=09:00 - 11:30').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Confirmación inmediata').first).to_be_visible(timeout=30000)\n        await expect(frame.locator('text=Cancelación flexible (24h)').first).to_be_visible(timeout=30000)\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "PASSED",
    "testError": "",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/176955928469857//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.088Z",
    "modified": "2026-01-28T00:14:44.918Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "3e04d110-f599-4ac9-a824-db4feffa2d97",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC018-Statistics Dashboard Data Accuracy",
    "description": "Validate that analytics and statistics on school dashboards display accurate data about classes, reservations, and revenue.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Open the booking modal by clicking the 'Reservar ahora' button to start the guest booking process.\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[12]/div/gmp-internal-camera-control/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Click the 'Reservar ahora' button to complete the guest reservation.\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' button to complete guest reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in the personal information fields (name, email, age) and proceed to the next step by clicking 'Siguiente'.\n        frame = context.pages[-1]\n        # Fill in full name in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Fill in email in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan@ejemplo.com')\n        \n\n        frame = context.pages[-1]\n        # Fill in age in reservation form\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Complete the guest reservation by filling any remaining required details and submitting the form. Then verify reservation success.\n        frame = context.pages[-1]\n        # Fill height in cm\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Fill weight in kg\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' button to proceed to next step or submit\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Datos de reserva no encontrados').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test case failed: Analytics and statistics on school dashboards do not display accurate data about classes, reservations, and revenue as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Guest checkout flow could not be completed due to reservation form submission failure. Unable to verify reservation creation and subsequent dashboard data accuracy. Reporting this issue and stopping further testing.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559103544595//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.095Z",
    "modified": "2026-01-28T00:11:43.686Z"
  },
  {
    "projectId": "fe591a88-bf36-4aef-a7a3-43a261e64e9f",
    "testId": "808dab59-fccb-4dea-8f56-223fb1518fef",
    "userId": "f4083458-a061-702f-db2d-f9cf41ab9fa4",
    "title": "TC019-Reservation Cancellation Email and Notification",
    "description": "Ensure that when a reservation is cancelled, proper cancellation email and in-app notification are sent to the user.",
    "code": "import asyncio\nfrom playwright import async_api\nfrom playwright.async_api import expect\n\nasync def run_test():\n    pw = None\n    browser = None\n    context = None\n    \n    try:\n        # Start a Playwright session in asynchronous mode\n        pw = await async_api.async_playwright().start()\n        \n        # Launch a Chromium browser in headless mode with custom arguments\n        browser = await pw.chromium.launch(\n            headless=True,\n            args=[\n                \"--window-size=1280,720\",         # Set the browser window size\n                \"--disable-dev-shm-usage\",        # Avoid using /dev/shm which can cause issues in containers\n                \"--ipc=host\",                     # Use host-level IPC for better stability\n                \"--single-process\"                # Run the browser in a single process mode\n            ],\n        )\n        \n        # Create a new browser context (like an incognito window)\n        context = await browser.new_context()\n        context.set_default_timeout(5000)\n        \n        # Open a new page in the browser context\n        page = await context.new_page()\n        \n        # Navigate to your target URL and wait until the network request is committed\n        await page.goto(\"http://localhost:3000/classes/3\", wait_until=\"commit\", timeout=10000)\n        \n        # Wait for the main page to reach DOMContentLoaded state (optional for stability)\n        try:\n            await page.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n        except async_api.Error:\n            pass\n        \n        # Iterate through all iframes and wait for them to load as well\n        for frame in page.frames:\n            try:\n                await frame.wait_for_load_state(\"domcontentloaded\", timeout=3000)\n            except async_api.Error:\n                pass\n        \n        # Interact with the page elements to simulate user flow\n        # -> Click on 'Reservar ahora' button to open booking modal\n        frame = context.pages[-1].frame_locator('html > body > div:nth-of-type(2) > div:nth-of-type(2) > div:nth-of-type(3) > div > section:nth-of-type(4) > div > div > iframe.w-full.h-full.grayscale-10.transition-all.duration-700[src=\"https://maps.google.com/maps?q=Playa%20Playa%20M%C3%A1ncora%2C%20M%C3%A1ncora%2C%20Piura&t=&z=15&ie=UTF8&iwloc=&output=embed\"][title=\"Ubicación de la clase\"][aria-label=\"Mapa mostrando la ubicación en Playa Máncora\"]')\n        # Click on 'Reservar ahora' button to open booking modal\n        elem = frame.locator('xpath=html/body/div/div/div[3]/div[13]/div/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Select '1 persona' from the participant dropdown and then click 'Reservar ahora' to complete reservation\n        frame = context.pages[-1]\n        # Click 'Reservar ahora' to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[2]/div[3]/div[2]/div/div/div[2]/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in guest personal details (name, email, age) and click 'Siguiente' to proceed\n        frame = context.pages[-1]\n        # Fill in full name\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Juan Pérez')\n        \n\n        frame = context.pages[-1]\n        # Fill in email\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('juan@example.com')\n        \n\n        frame = context.pages[-1]\n        # Fill in age\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[3]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('25')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' to proceed with reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/div[2]/div/button').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # -> Fill in experience details (height, weight, swimming level, injury) and click 'Siguiente' to complete reservation\n        frame = context.pages[-1]\n        # Fill in height\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('170')\n        \n\n        frame = context.pages[-1]\n        # Fill in weight\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[2]/div[2]/input').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('70')\n        \n\n        frame = context.pages[-1]\n        # Fill in injury or medical condition\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div/form/div/div[4]/textarea').nth(0)\n        await page.wait_for_timeout(3000); await elem.fill('Ninguna')\n        \n\n        frame = context.pages[-1]\n        # Click 'Siguiente' to complete reservation\n        elem = frame.locator('xpath=html/body/div[2]/div[3]/div/div').nth(0)\n        await page.wait_for_timeout(3000); await elem.click(timeout=5000)\n        \n\n        # --> Assertions to verify final state\n        frame = context.pages[-1]\n        try:\n            await expect(frame.locator('text=Reservation Cancelled Successfully').first).to_be_visible(timeout=1000)\n        except AssertionError:\n            raise AssertionError(\"Test failed: The reservation cancellation did not trigger the expected cancellation email and in-app notification as per the test plan.\")\n        await asyncio.sleep(5)\n    \n    finally:\n        if context:\n            await context.close()\n        if browser:\n            await browser.close()\n        if pw:\n            await pw.stop()\n            \nasyncio.run(run_test())\n    ",
    "testStatus": "FAILED",
    "testError": "Stopped due to inability to complete guest reservation. The form does not progress after filling all required fields and clicking 'Siguiente'. Cannot proceed with cancellation and notification testing.\nBrowser Console Logs:\n[WARNING] Image with src \"/uploads/classes/mancora-1.jpg\" was detected as the Largest Contentful Paint (LCP). Please add the \"priority\" property if this image is above the fold.\nRead more: https://nextjs.org/docs/api-reference/next/image#priority (at webpack-internal:///(app-pages-browser)/./node_modules/next/dist/shared/lib/utils/warn-once.js:15:20)",
    "testType": "FRONTEND",
    "createFrom": "mcp",
    "testVisualization": "https://testsprite-videos.s3.us-east-1.amazonaws.com/f4083458-a061-702f-db2d-f9cf41ab9fa4/1769559052166354//tmp/test_task/result.webm",
    "created": "2026-01-28T00:04:58.102Z",
    "modified": "2026-01-28T00:10:52.372Z"
  }
]
